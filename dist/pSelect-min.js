!function(e){e.fn.pSelect=function(t){console.time("lay"),console.log(this);var a=e.extend({placeholder:e(this).attr("placeholder")},e.fn.pSelect.defaults,t);e(this).hide();var l=e(this),n=e("<div>",{class:"pSelect"});n.insertAfter(this),n.css({"font-size":a.baseSize,"text-align":a.align});var i=e("<div>",{class:"pSelect-box"}).text(a.placeholder);i.appendTo(n);var c=document.createElement("div");if(c.className="pSelect-wrapper",a.search.enable){var o=document.createElement("input");o.type="text",o.placeholder=a.search.placeholder;var d=document.createElement("div");d.classList.add("search-box"),d.appendChild(o),c.appendChild(d)}var r,s,p,u,v=document.createElement("ul");e(this).find("option").each(function(e,t){var a=document.createElement("li");a.textContent=t.textContent;var l=document.createAttribute("data-value");l.value=t.value,a.setAttributeNode(l),v.appendChild(a)}),c.appendChild(v),n[0].appendChild(c),e(document).on("click",".pSelect",(r=function(t){if(t.target!==o&&(e(this).find(".pSelect-wrapper").toggleClass("open"),e("body").toggleClass("pSelect-is-open"),e("body").hasClass("pSelect-is-open")))try{console.log(o.focus())}catch(t){console.log(t)}},s=300,p=null,u=!1,function(){clearTimeout(p);var e=arguments;!u&&r.apply(this,e),u=!0,p=setTimeout(function(){u=!1},s)})),e(document).on("keydown",".pSelect-is-open",function(e){var t;switch(void 0!==e.key?t=e.key:void 0!==e.keyIdentifier?t=e.keyIdentifier:void 0!==e.keyCode&&(t=e.keyCode),t){case 40:e.preventDefault(),(a=n.find("li.pS-active")).length?a.removeClass("pS-active").next(":not(.hide)").addClass("pS-active"):n.find("li:eq(0):not(.hide)").addClass("pS-active");break;case 38:var a;e.preventDefault(),(a=n.find("li.pS-active")).length?a.removeClass("pS-active").prev(":not(.hide)").addClass("pS-active"):n.find("li:last:not(.hide)").addClass("pS-active");break;case 13:e.preventDefault(),n.find("li.pS-active").click()}}),e(document).on("click",".pSelect-wrapper li",function(t){var a;t.target!==d&&t.target!==o&&(a=e(this),l.val(a.attr("data-value")).trigger("change"),i.text(a.text()))}),a.search.enable&&o.addEventListener("input",function(){!function(e,t){for(var a=document.querySelectorAll(e),l=0;l<a.length;l++)~a[l].textContent.search(new RegExp(t,"gi"))?a[l].classList.remove("hide"):a[l].classList.add("hide")}(".pSelect-wrapper li",o.value)}),a.ajax.url&&e.get(a.ajax.url,function(){}),console.timeEnd("lay")},e.fn.pSelect.defaults={baseSize:14,align:"center",search:{enable:!0,placeholder:"Enter 3 characters at least"},ajax:{url:!1}}}(jQuery);